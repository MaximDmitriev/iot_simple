[{"D:\\projects\\esp32\\front\\src\\index.js":"1","D:\\projects\\esp32\\front\\src\\App.js":"2","D:\\projects\\esp32\\front\\src\\pages\\index.js":"3","D:\\projects\\esp32\\front\\src\\components\\navbar\\index.js":"4","D:\\projects\\esp32\\front\\src\\pages\\login.js":"5","D:\\projects\\esp32\\front\\src\\pages\\404.js":"6","D:\\projects\\esp32\\front\\src\\pages\\main.js":"7","D:\\projects\\esp32\\front\\src\\components\\navbar\\style.js":"8","D:\\projects\\esp32\\front\\src\\pages\\style\\login-style.js":"9","D:\\projects\\esp32\\front\\src\\pages\\style\\404-style.js":"10","D:\\projects\\esp32\\front\\src\\pages\\style\\main-style.js":"11","D:\\projects\\esp32\\front\\src\\components\\report-container\\index.js":"12","D:\\projects\\esp32\\front\\src\\components\\report-container\\style.js":"13","D:\\projects\\esp32\\front\\src\\services\\fetchData.js":"14","D:\\projects\\esp32\\front\\src\\components\\error\\index.js":"15","D:\\projects\\esp32\\front\\src\\components\\error\\style.js":"16","D:\\projects\\esp32\\front\\src\\components\\list-report\\index.js":"17","D:\\projects\\esp32\\front\\src\\components\\list-report\\utils.js":"18","D:\\projects\\esp32\\front\\src\\components\\list-report\\list-localization.js":"19","D:\\projects\\esp32\\front\\src\\services\\auth.js":"20","D:\\projects\\esp32\\front\\src\\components\\modal\\index.js":"21","D:\\projects\\esp32\\front\\src\\components\\modal\\style.js":"22","D:\\projects\\esp32\\front\\src\\components\\widgets\\index.js":"23"},{"size":241,"mtime":1610275600884,"results":"24","hashOfConfig":"25"},{"size":2001,"mtime":1611939743831,"results":"26","hashOfConfig":"25"},{"size":160,"mtime":1610046352222,"results":"27","hashOfConfig":"25"},{"size":2702,"mtime":1610301669173,"results":"28","hashOfConfig":"25"},{"size":4065,"mtime":1611511233766,"results":"29","hashOfConfig":"25"},{"size":967,"mtime":1610289067231,"results":"30","hashOfConfig":"25"},{"size":1693,"mtime":1610302671663,"results":"31","hashOfConfig":"25"},{"size":275,"mtime":1610104090316,"results":"32","hashOfConfig":"25"},{"size":594,"mtime":1610284343216,"results":"33","hashOfConfig":"25"},{"size":435,"mtime":1610104541099,"results":"34","hashOfConfig":"25"},{"size":218,"mtime":1610104650604,"results":"35","hashOfConfig":"25"},{"size":1747,"mtime":1611687422099,"results":"36","hashOfConfig":"25"},{"size":613,"mtime":1610115906163,"results":"37","hashOfConfig":"25"},{"size":511,"mtime":1611687839393,"results":"38","hashOfConfig":"25"},{"size":388,"mtime":1610115747519,"results":"39","hashOfConfig":"25"},{"size":172,"mtime":1610115747661,"results":"40","hashOfConfig":"25"},{"size":1641,"mtime":1611786133254,"results":"41","hashOfConfig":"25"},{"size":2535,"mtime":1611867318778,"results":"42","hashOfConfig":"25"},{"size":2494,"mtime":1610133810467,"results":"43","hashOfConfig":"25"},{"size":648,"mtime":1610301669157,"results":"44","hashOfConfig":"25"},{"size":3318,"mtime":1611940065082,"results":"45","hashOfConfig":"25"},{"size":1176,"mtime":1611940065069,"results":"46","hashOfConfig":"25"},{"size":1782,"mtime":1611944902087,"results":"47","hashOfConfig":"25"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},"1x2h9kc",{"filePath":"51","messages":"52","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"59","usedDeprecatedRules":"50"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"50"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"75","usedDeprecatedRules":"50"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"88","usedDeprecatedRules":"50"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"95","messages":"96","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\projects\\esp32\\front\\src\\index.js",[],["99","100"],"D:\\projects\\esp32\\front\\src\\App.js",["101"],"D:\\projects\\esp32\\front\\src\\pages\\index.js",[],"D:\\projects\\esp32\\front\\src\\components\\navbar\\index.js",[],"D:\\projects\\esp32\\front\\src\\pages\\login.js",["102"],"import React, { useState } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  Button,\r\n  FormControl,\r\n  IconButton,\r\n  InputAdornment,\r\n  Paper,\r\n  TextField,\r\n  Typography\r\n} from '@material-ui/core';\r\nimport { AccountCircle, Lock, Visibility, VisibilityOff } from '@material-ui/icons';\r\nimport { Navbar } from '../components/navbar';\r\nimport { useAuth } from '../App';\r\n\r\nimport { useStyles } from './style/login-style';\r\n\r\n\r\nexport const LoginPage = () => {\r\n  const classes = useStyles();\r\n  const auth = useAuth();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const [values, setValues] = useState({\r\n    login: '',\r\n    password: '',\r\n    showPassword: false,\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    login: false,\r\n    password: false,\r\n    loginText: '',\r\n    passwordText: ''\r\n  });\r\n\r\n  const [type, setType] = useState({\r\n    newUser: false\r\n  });\r\n\r\n  const changeFormType = () => {\r\n    setType({ newUser: !type.newUser });\r\n    // fetch('http://127.0.0.1:3001/json/test').then(res => {\r\n    //   console.log(res);\r\n    //   return res;\r\n    // }).\r\n    // then(res => console.log(res));\r\n  }\r\n\r\n  const login = () => {\r\n    const { from } = location.state || { from: { pathname: \"/report\" } };\r\n    auth.signin(() => {\r\n      history.replace(from);\r\n    });\r\n\r\n  }\r\n\r\n  const handleChange = (prop) => (event) => {\r\n    setValues({ ...values, [prop]: event.target.value });\r\n  };\r\n\r\n  const handleClickShowPassword = () => {\r\n    setValues({ ...values, showPassword: !values.showPassword });\r\n  };\r\n\r\n  const handleMouseDownPassword = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n      <Navbar title={'Авторизация'} />\r\n      <Paper elevation={3} className={classes.paper}>\r\n        <Typography variant={'h6'} align={'center'}>\r\n          {type.newUser ? 'Регистрация нового пользователя' : 'Вход в аккаунт'}\r\n        </Typography>\r\n        <FormControl className={classes.inputWrapper}>\r\n          <TextField\r\n            id=\"login\"\r\n            label=\"Логин\"\r\n            error={errors.login}\r\n            helperText={errors.loginText}\r\n            onChange={handleChange('login')}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <AccountCircle />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n        </FormControl>\r\n        <FormControl className={classes.inputWrapper}>\r\n          <TextField\r\n            id=\"password\"\r\n            label=\"Пароль\"\r\n            type={values.showPassword ? 'text' : 'password'}\r\n            error={errors.password}\r\n            helperText={errors.passwordText}\r\n            onChange={handleChange('password')}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <Lock />\r\n                </InputAdornment>\r\n              ),\r\n              endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={handleClickShowPassword}\r\n                  onMouseDown={handleMouseDownPassword}\r\n                >\r\n                  {values.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n        </FormControl>\r\n        <Box className={classes.btnWrapper}>\r\n          <Button className={classes.button} color=\"primary\" variant=\"contained\" onClick={login}>\r\n            {type.newUser ? 'Зарегистрироваться' : 'Войти'}\r\n          </Button>\r\n          <Button className={classes.button} variant=\"contained\" onClick={changeFormType}>\r\n            {type.newUser ? 'Уже есть аккаунт' : 'Создать аккаунт'}\r\n          </Button>\r\n        </Box>\r\n      </Paper>\r\n    </>\r\n  )\r\n}","D:\\projects\\esp32\\front\\src\\pages\\404.js",[],"D:\\projects\\esp32\\front\\src\\pages\\main.js",["103"],"import React, { useEffect, useState } from 'react';\r\nimport { Navbar } from '../components/navbar';\r\nimport { Paper, Typography } from '@material-ui/core';\r\nimport { ReportContainer } from '../components/report-container';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nimport { useStyles } from './style/main-style';\r\n\r\n\r\nconst reportsList = [\r\n  { url: 'users', name: 'Пользователи' },\r\n  { url: 'sensors', name: 'Датчики' },\r\n  { url: 'dashboards', name: 'Дашборды' },\r\n];\r\n\r\n\r\n\r\nexport const MainPage = () => {\r\n  const classes = useStyles();\r\n  const location = useLocation();\r\n\r\n  const [report, setReport] = useState({\r\n    type: 'start',\r\n    name: 'Основная панель'\r\n  });\r\n\r\n  const chooseReport = (item) => {\r\n    const currentReport = reportsList.find(r => r.url === item);\r\n    if (currentReport) {\r\n      setReport({ type: currentReport.url, name: currentReport.name });\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    let restUrl = location.pathname.split('/');\r\n    if (restUrl[1] === 'report' && restUrl[2]) {\r\n      chooseReport(restUrl[2]);\r\n    }\r\n  }, []);\r\n\r\n  const onSelectItem = (item) => {\r\n    chooseReport(item);\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n      <Navbar title={report.name} showBtn userName=\"Максим Дмитриев\" reports={reportsList} onSelectItem={(item) => onSelectItem(item)}/>\r\n      {report.type === 'start'\r\n        ? (<Paper elevation={5} className={classes.paper}>\r\n            <Typography variant={'body1'} align={'center'}>\r\n              Выберите в меню нужный отчет\r\n            </Typography>\r\n          </Paper>)\r\n        : <ReportContainer url={report.type}/>}\r\n    </>\r\n  )\r\n}","D:\\projects\\esp32\\front\\src\\components\\navbar\\style.js",[],"D:\\projects\\esp32\\front\\src\\pages\\style\\login-style.js",[],"D:\\projects\\esp32\\front\\src\\pages\\style\\404-style.js",[],"D:\\projects\\esp32\\front\\src\\pages\\style\\main-style.js",[],"D:\\projects\\esp32\\front\\src\\components\\report-container\\index.js",["104"],"import React, { useEffect, useState } from 'react';\r\n\r\nimport { useStyles } from './style';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\nimport FetchData from '../../services/fetchData';\r\nimport { ErrorComponent } from '../error';\r\nimport { ListReport } from '../list-report';\r\n\r\nconst REPORT_NOT_IMPLEMENTED_MSG = 'Отчет не готов к использованию, выберите другой отчет';\r\n\r\n\r\nexport const ReportContainer = ({ url }) => {\r\n  const fetchData = new FetchData();\r\n  const classes = useStyles();\r\n\r\n  const [report, setReport] = useState({\r\n    loaded: false,\r\n    type: null,\r\n    data: null,\r\n    metadata: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    setReport({ ...report, loaded: false });\r\n\r\n    // @TODO переделать на разные запросы по url\r\n    fetchData.getReport(url).then(\r\n      res => {\r\n        if (res) {\r\n          setReport({\r\n            loaded: true,\r\n            type: res.metadata.type,\r\n            data: res.data,\r\n            metadata: res.metadata\r\n          });\r\n        } else {\r\n          console.log('error');\r\n          setReport({ ...report, loaded: 'withError' });\r\n        }\r\n      }\r\n    );\r\n  },[url]);\r\n\r\n  if (!report.loaded) {\r\n    return (\r\n      <div className={classes.progressContainer}>\r\n        <LinearProgress className={classes.progress} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (report.loaded === 'withError') {\r\n    return (\r\n      <div className={classes.wrapper}>\r\n        <ErrorComponent message={REPORT_NOT_IMPLEMENTED_MSG}/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      {report.type === 'LIST' ? <ListReport data={report.data} metadata={report.metadata}/> : null}\r\n    </div>\r\n  )\r\n}","D:\\projects\\esp32\\front\\src\\components\\report-container\\style.js",[],"D:\\projects\\esp32\\front\\src\\services\\fetchData.js",[],"D:\\projects\\esp32\\front\\src\\components\\error\\index.js",[],"D:\\projects\\esp32\\front\\src\\components\\error\\style.js",[],"D:\\projects\\esp32\\front\\src\\components\\list-report\\index.js",[],"D:\\projects\\esp32\\front\\src\\components\\list-report\\utils.js",["105"],"import dayjs from 'dayjs';\r\n\r\n\r\nconst ROW_HEIGHT = 85;\r\nconst NUMBER_COLUMNS = 12;\r\n\r\nfunction convertWidth(str, totalWidth) {\r\n  const index = str.indexOf('px');\r\n  return +str.substring(0, index);\r\n}\r\n\r\nexport function getColumns({ definition }) {\r\n  const columns = definition.columns.reduce((acc, col) => {\r\n      return acc.concat([{\r\n        field: col.systemname || col.name,\r\n        headerName: col.name,\r\n        width: convertWidth(col.width),\r\n        hidden: !col.visible,\r\n        order: col.order,\r\n        style: col.style || null\r\n      }]);\r\n    }, [])\r\n    .sort((a, b) => {\r\n      if (a.order < b.order) return -1;\r\n      return 1;\r\n    });\r\n  columns[columns.length -1]['flex'] = 1;\r\n\r\n  return columns;\r\n}\r\n\r\nfunction formatCell(row, stylesMap) {\r\n  Object.keys(row).map(name => {\r\n    if (stylesMap[name]) {\r\n      if (stylesMap[name] === 'datetime') {\r\n        const val = dayjs(row[name]).format('DD/MM/YYYY HH:mm');\r\n        row[name] = val;\r\n      }\r\n    }\r\n  });\r\n\r\n  return row;\r\n}\r\n\r\nexport function formatData(data, columns) {\r\n  const stylesMap = columns.reduce((acc, col) => {\r\n    if (col.style) acc[col.field] = col.style;\r\n    return acc;\r\n  }, {});\r\n  return data.map(row => {\r\n    return formatCell(row, stylesMap);\r\n  });\r\n}\r\n\r\nexport function getFormDefinition({ definition: {columns}}) {\r\n  const rowPositions = columns.reduce((obj, widget) => {\r\n    if (!obj[widget.position[1]] || obj[widget.position[1]] < widget.size[1]) {\r\n      obj[widget.position[1]] = widget.size[1];\r\n    }\r\n    return obj;\r\n  }, {});\r\n  const maxRowNumber = Math.max(...Object.keys(rowPositions).map(k => parseInt(k)));\r\n\r\n  //общая высота сетки\r\n  const totalHeight = rowPositions[maxRowNumber] > 1\r\n    ? (maxRowNumber + rowPositions[maxRowNumber]) * ROW_HEIGHT\r\n    : (maxRowNumber + 1) * ROW_HEIGHT;\r\n\r\n  //параметры одной ячейки в процентах\r\n  const colHeight = (100 * ROW_HEIGHT)/totalHeight;\r\n  const colWidth = 100/NUMBER_COLUMNS;\r\n\r\n  const definition = columns\r\n    .filter(c => c.show_in_form)\r\n    .map(c => ({\r\n      fieldName: c.systemname,\r\n      label: c.name || c.systemname,\r\n      fieldFormat: c.style,\r\n      pattern: c.pattern || null,\r\n      readonly: c.readonly || false,\r\n      required: c.required || false,\r\n      width: `${colWidth * c.size[0]}%`,\r\n      height: `${colHeight * c.size[1]}%`,\r\n      top: c.position[1] * colHeight + '%',\r\n      left: c.position[0] * colWidth + '%'\r\n    }));\r\n  return {\r\n    totalHeight,\r\n    definition\r\n  }\r\n}","D:\\projects\\esp32\\front\\src\\components\\list-report\\list-localization.js",[],"D:\\projects\\esp32\\front\\src\\services\\auth.js",[],"D:\\projects\\esp32\\front\\src\\components\\modal\\index.js",["106"],"D:\\projects\\esp32\\front\\src\\components\\modal\\style.js",[],"D:\\projects\\esp32\\front\\src\\components\\widgets\\index.js",[],{"ruleId":"107","replacedBy":"108"},{"ruleId":"109","replacedBy":"110"},{"ruleId":"111","severity":1,"message":"112","line":1,"column":44,"nodeType":"113","messageId":"114","endLine":1,"endColumn":52},{"ruleId":"111","severity":1,"message":"115","line":32,"column":18,"nodeType":"113","messageId":"114","endLine":32,"endColumn":27},{"ruleId":"116","severity":1,"message":"117","line":38,"column":6,"nodeType":"118","endLine":38,"endColumn":8,"suggestions":"119"},{"ruleId":"116","severity":1,"message":"120","line":43,"column":5,"nodeType":"118","endLine":43,"endColumn":10,"suggestions":"121"},{"ruleId":"122","severity":1,"message":"123","line":33,"column":29,"nodeType":"124","messageId":"125","endLine":33,"endColumn":31},{"ruleId":"116","severity":1,"message":"126","line":38,"column":6,"nodeType":"118","endLine":38,"endColumn":10,"suggestions":"127"},"no-native-reassign",["128"],"no-negated-in-lhs",["129"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'setErrors' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'location.pathname'. Either include it or remove the dependency array.","ArrayExpression",["130"],"React Hook useEffect has missing dependencies: 'fetchData' and 'report'. Either include them or remove the dependency array. You can also do a functional update 'setReport(r => ...)' if you only need 'report' in the 'setReport' call.",["131"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","React Hook useEffect has a missing dependency: 'tableName'. Either include it or remove the dependency array.",["132"],"no-global-assign","no-unsafe-negation",{"desc":"133","fix":"134"},{"desc":"135","fix":"136"},{"desc":"137","fix":"138"},"Update the dependencies array to be: [location.pathname]",{"range":"139","text":"140"},"Update the dependencies array to be: [fetchData, report, url]",{"range":"141","text":"142"},"Update the dependencies array to be: [id, tableName]",{"range":"143","text":"144"},[1068,1070],"[location.pathname]",[1132,1137],"[fetchData, report, url]",[1220,1224],"[id, tableName]"]