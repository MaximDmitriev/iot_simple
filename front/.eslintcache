[{"D:\\projects\\esp32\\front\\src\\index.js":"1","D:\\projects\\esp32\\front\\src\\App.js":"2","D:\\projects\\esp32\\front\\src\\pages\\index.js":"3","D:\\projects\\esp32\\front\\src\\components\\navbar\\index.js":"4","D:\\projects\\esp32\\front\\src\\pages\\login.js":"5","D:\\projects\\esp32\\front\\src\\pages\\404.js":"6","D:\\projects\\esp32\\front\\src\\pages\\main.js":"7","D:\\projects\\esp32\\front\\src\\components\\navbar\\style.js":"8","D:\\projects\\esp32\\front\\src\\pages\\style\\login-style.js":"9","D:\\projects\\esp32\\front\\src\\pages\\style\\404-style.js":"10","D:\\projects\\esp32\\front\\src\\pages\\style\\main-style.js":"11","D:\\projects\\esp32\\front\\src\\components\\report-container\\index.js":"12","D:\\projects\\esp32\\front\\src\\components\\report-container\\style.js":"13","D:\\projects\\esp32\\front\\src\\services\\fetchData.js":"14","D:\\projects\\esp32\\front\\src\\components\\error\\index.js":"15","D:\\projects\\esp32\\front\\src\\components\\error\\style.js":"16","D:\\projects\\esp32\\front\\src\\components\\list-report\\index.js":"17","D:\\projects\\esp32\\front\\src\\components\\list-report\\utils.js":"18","D:\\projects\\esp32\\front\\src\\components\\list-report\\list-localization.js":"19","D:\\projects\\esp32\\front\\src\\services\\auth.js":"20","D:\\projects\\esp32\\front\\src\\components\\modal\\index.js":"21","D:\\projects\\esp32\\front\\src\\components\\modal\\style.js":"22","D:\\projects\\esp32\\front\\src\\components\\widgets\\index.js":"23","D:\\projects\\esp32\\front\\src\\components\\popup\\index.js":"24","D:\\projects\\esp32\\front\\src\\components\\popup\\style.js":"25","D:\\projects\\esp32\\front\\src\\components\\list-report\\style.js":"26","D:\\projects\\esp32\\front\\src\\components\\widgets\\style.js":"27"},{"size":241,"mtime":1611953310360,"results":"28","hashOfConfig":"29"},{"size":2270,"mtime":1612026616016,"results":"30","hashOfConfig":"29"},{"size":160,"mtime":1610046352222,"results":"31","hashOfConfig":"29"},{"size":2702,"mtime":1610301669173,"results":"32","hashOfConfig":"29"},{"size":3901,"mtime":1611952198119,"results":"33","hashOfConfig":"29"},{"size":967,"mtime":1610289067231,"results":"34","hashOfConfig":"29"},{"size":1693,"mtime":1610302671663,"results":"35","hashOfConfig":"29"},{"size":275,"mtime":1610104090316,"results":"36","hashOfConfig":"29"},{"size":594,"mtime":1610284343216,"results":"37","hashOfConfig":"29"},{"size":435,"mtime":1610104541099,"results":"38","hashOfConfig":"29"},{"size":218,"mtime":1610104650604,"results":"39","hashOfConfig":"29"},{"size":1747,"mtime":1611687422099,"results":"40","hashOfConfig":"29"},{"size":613,"mtime":1610115906163,"results":"41","hashOfConfig":"29"},{"size":511,"mtime":1612027702971,"results":"42","hashOfConfig":"29"},{"size":388,"mtime":1610115747519,"results":"43","hashOfConfig":"29"},{"size":172,"mtime":1610115747661,"results":"44","hashOfConfig":"29"},{"size":1975,"mtime":1612103519899,"results":"45","hashOfConfig":"29"},{"size":2535,"mtime":1611867318778,"results":"46","hashOfConfig":"29"},{"size":2494,"mtime":1610133810467,"results":"47","hashOfConfig":"29"},{"size":648,"mtime":1610301669157,"results":"48","hashOfConfig":"29"},{"size":4333,"mtime":1612029695221,"results":"49","hashOfConfig":"29"},{"size":1176,"mtime":1611940065069,"results":"50","hashOfConfig":"29"},{"size":2039,"mtime":1612103703221,"results":"51","hashOfConfig":"29"},{"size":1408,"mtime":1612037188168,"results":"52","hashOfConfig":"29"},{"size":215,"mtime":1612037194422,"results":"53","hashOfConfig":"29"},{"size":469,"mtime":1612039882813,"results":"54","hashOfConfig":"29"},{"size":785,"mtime":1612103139692,"results":"55","hashOfConfig":"29"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},"1x2h9kc",{"filePath":"59","messages":"60","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"58"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"58"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"73","usedDeprecatedRules":"58"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"76","messages":"77","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"84","usedDeprecatedRules":"58"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"93","messages":"94","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"95","messages":"96","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"97","usedDeprecatedRules":"58"},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"100","messages":"101","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"104","usedDeprecatedRules":"58"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"109","messages":"110","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"111","messages":"112","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"58"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\projects\\esp32\\front\\src\\index.js",[],["117","118"],"D:\\projects\\esp32\\front\\src\\App.js",["119"],"import React, { createContext, useContext, useState } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { Container } from '@material-ui/core';\nimport { MainPage, LoginPage, NotFoundPage } from './pages';\nimport { useProvideAuth } from './services/auth';\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers';\nimport { SnackbarProvider } from 'notistack';\nimport dayjsUtils from '@date-io/dayjs';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport './App.css';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundImage: 'url(/img/iot4.png)',\n    backgroundRepeat: 'no-repeat',\n    backgroundPositionY: 'center',\n    height: '100vh',\n    width: '100%',\n    margin: 0,\n    padding: 0\n  },\n}));\n\nconst authContext = createContext();\nexport function useAuth() {\n  return useContext(authContext);\n}\n\nfunction ProvideAuth({ children }) {\n  const auth = useProvideAuth();\n\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>\n}\n\nfunction PrivateRoute({ children, ...rest }) {\n  const auth = useAuth();\n  return (\n    <Route\n      {...rest}\n      render={({ location }) => auth.user\n        ? children\n        : <Redirect to={{ pathname: \"/login\", state: { from: location } }} />}\n    />\n  );\n}\n\nfunction App() {\n  const classes = useStyles();\n\n  return (\n    <SnackbarProvider\n      anchorOrigin={{\n        vertical: 'top',\n        horizontal: 'right',\n      }}\n      maxSnack={5}\n      preventDuplicate\n    >\n      <MuiPickersUtilsProvider utils={dayjsUtils}>\n        <Container maxWidth=\"lg\">\n          <Container maxWidth=\"lg\" className={classes.root} >\n            <ProvideAuth>\n              <Switch>\n                <PrivateRoute path=\"/report\">\n                  <MainPage />\n                </PrivateRoute>\n                <PrivateRoute path=\"/\" exact>\n                  <MainPage />\n                </PrivateRoute>\n                <Route path=\"/login\">\n                  <LoginPage />\n                </Route>\n                <Route>\n                  <NotFoundPage />\n                </Route>\n              </Switch>\n            </ProvideAuth>\n          </Container>\n        </Container>\n      </MuiPickersUtilsProvider>\n    </SnackbarProvider>\n  );\n}\n\nexport default App;\n","D:\\projects\\esp32\\front\\src\\pages\\index.js",[],"D:\\projects\\esp32\\front\\src\\components\\navbar\\index.js",[],"D:\\projects\\esp32\\front\\src\\pages\\login.js",["120"],"import React, { useState } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  Button,\r\n  FormControl,\r\n  IconButton,\r\n  InputAdornment,\r\n  Paper,\r\n  TextField,\r\n  Typography\r\n} from '@material-ui/core';\r\nimport { AccountCircle, Lock, Visibility, VisibilityOff } from '@material-ui/icons';\r\nimport { Navbar } from '../components/navbar';\r\nimport { useAuth } from '../App';\r\n\r\nimport { useStyles } from './style/login-style';\r\n\r\n\r\nexport const LoginPage = () => {\r\n  const classes = useStyles();\r\n  const auth = useAuth();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const [values, setValues] = useState({\r\n    login: '',\r\n    password: '',\r\n    showPassword: false,\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    login: false,\r\n    password: false,\r\n    loginText: '',\r\n    passwordText: ''\r\n  });\r\n\r\n  const [type, setType] = useState({\r\n    newUser: false\r\n  });\r\n\r\n  const changeFormType = () => {\r\n    setType({ newUser: !type.newUser });\r\n  }\r\n\r\n  const login = () => {\r\n    const { from } = location.state || { from: { pathname: \"/report\" } };\r\n    auth.signin(() => {\r\n      history.replace(from);\r\n    });\r\n\r\n  }\r\n\r\n  const handleChange = (prop) => (event) => {\r\n    setValues({ ...values, [prop]: event.target.value });\r\n  };\r\n\r\n  const handleClickShowPassword = () => {\r\n    setValues({ ...values, showPassword: !values.showPassword });\r\n  };\r\n\r\n  const handleMouseDownPassword = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n      <Navbar title={'Авторизация'} />\r\n      <Paper elevation={3} className={classes.paper}>\r\n        <Typography variant={'h6'} align={'center'}>\r\n          {type.newUser ? 'Регистрация нового пользователя' : 'Вход в аккаунт'}\r\n        </Typography>\r\n        <FormControl className={classes.inputWrapper}>\r\n          <TextField\r\n            id=\"login\"\r\n            label=\"Логин\"\r\n            error={errors.login}\r\n            helperText={errors.loginText}\r\n            onChange={handleChange('login')}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <AccountCircle />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n        </FormControl>\r\n        <FormControl className={classes.inputWrapper}>\r\n          <TextField\r\n            id=\"password\"\r\n            label=\"Пароль\"\r\n            type={values.showPassword ? 'text' : 'password'}\r\n            error={errors.password}\r\n            helperText={errors.passwordText}\r\n            onChange={handleChange('password')}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <Lock />\r\n                </InputAdornment>\r\n              ),\r\n              endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={handleClickShowPassword}\r\n                  onMouseDown={handleMouseDownPassword}\r\n                >\r\n                  {values.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n        </FormControl>\r\n        <Box className={classes.btnWrapper}>\r\n          <Button className={classes.button} color=\"primary\" variant=\"contained\" onClick={login}>\r\n            {type.newUser ? 'Зарегистрироваться' : 'Войти'}\r\n          </Button>\r\n          <Button className={classes.button} variant=\"contained\" onClick={changeFormType}>\r\n            {type.newUser ? 'Уже есть аккаунт' : 'Создать аккаунт'}\r\n          </Button>\r\n        </Box>\r\n      </Paper>\r\n    </>\r\n  )\r\n}","D:\\projects\\esp32\\front\\src\\pages\\404.js",[],"D:\\projects\\esp32\\front\\src\\pages\\main.js",["121"],"import React, { useEffect, useState } from 'react';\r\nimport { Navbar } from '../components/navbar';\r\nimport { Paper, Typography } from '@material-ui/core';\r\nimport { ReportContainer } from '../components/report-container';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nimport { useStyles } from './style/main-style';\r\n\r\n\r\nconst reportsList = [\r\n  { url: 'users', name: 'Пользователи' },\r\n  { url: 'sensors', name: 'Датчики' },\r\n  { url: 'dashboards', name: 'Дашборды' },\r\n];\r\n\r\n\r\n\r\nexport const MainPage = () => {\r\n  const classes = useStyles();\r\n  const location = useLocation();\r\n\r\n  const [report, setReport] = useState({\r\n    type: 'start',\r\n    name: 'Основная панель'\r\n  });\r\n\r\n  const chooseReport = (item) => {\r\n    const currentReport = reportsList.find(r => r.url === item);\r\n    if (currentReport) {\r\n      setReport({ type: currentReport.url, name: currentReport.name });\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    let restUrl = location.pathname.split('/');\r\n    if (restUrl[1] === 'report' && restUrl[2]) {\r\n      chooseReport(restUrl[2]);\r\n    }\r\n  }, []);\r\n\r\n  const onSelectItem = (item) => {\r\n    chooseReport(item);\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n      <Navbar title={report.name} showBtn userName=\"Максим Дмитриев\" reports={reportsList} onSelectItem={(item) => onSelectItem(item)}/>\r\n      {report.type === 'start'\r\n        ? (<Paper elevation={5} className={classes.paper}>\r\n            <Typography variant={'body1'} align={'center'}>\r\n              Выберите в меню нужный отчет\r\n            </Typography>\r\n          </Paper>)\r\n        : <ReportContainer url={report.type}/>}\r\n    </>\r\n  )\r\n}","D:\\projects\\esp32\\front\\src\\components\\navbar\\style.js",[],"D:\\projects\\esp32\\front\\src\\pages\\style\\login-style.js",[],"D:\\projects\\esp32\\front\\src\\pages\\style\\404-style.js",[],"D:\\projects\\esp32\\front\\src\\pages\\style\\main-style.js",[],"D:\\projects\\esp32\\front\\src\\components\\report-container\\index.js",["122"],"import React, { useEffect, useState } from 'react';\r\n\r\nimport { useStyles } from './style';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\nimport FetchData from '../../services/fetchData';\r\nimport { ErrorComponent } from '../error';\r\nimport { ListReport } from '../list-report';\r\n\r\nconst REPORT_NOT_IMPLEMENTED_MSG = 'Отчет не готов к использованию, выберите другой отчет';\r\n\r\n\r\nexport const ReportContainer = ({ url }) => {\r\n  const fetchData = new FetchData();\r\n  const classes = useStyles();\r\n\r\n  const [report, setReport] = useState({\r\n    loaded: false,\r\n    type: null,\r\n    data: null,\r\n    metadata: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    setReport({ ...report, loaded: false });\r\n\r\n    // @TODO переделать на разные запросы по url\r\n    fetchData.getReport(url).then(\r\n      res => {\r\n        if (res) {\r\n          setReport({\r\n            loaded: true,\r\n            type: res.metadata.type,\r\n            data: res.data,\r\n            metadata: res.metadata\r\n          });\r\n        } else {\r\n          console.log('error');\r\n          setReport({ ...report, loaded: 'withError' });\r\n        }\r\n      }\r\n    );\r\n  },[url]);\r\n\r\n  if (!report.loaded) {\r\n    return (\r\n      <div className={classes.progressContainer}>\r\n        <LinearProgress className={classes.progress} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (report.loaded === 'withError') {\r\n    return (\r\n      <div className={classes.wrapper}>\r\n        <ErrorComponent message={REPORT_NOT_IMPLEMENTED_MSG}/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      {report.type === 'LIST' ? <ListReport data={report.data} metadata={report.metadata}/> : null}\r\n    </div>\r\n  )\r\n}","D:\\projects\\esp32\\front\\src\\components\\report-container\\style.js",[],"D:\\projects\\esp32\\front\\src\\services\\fetchData.js",[],"D:\\projects\\esp32\\front\\src\\components\\error\\index.js",[],"D:\\projects\\esp32\\front\\src\\components\\error\\style.js",[],"D:\\projects\\esp32\\front\\src\\components\\list-report\\index.js",[],"D:\\projects\\esp32\\front\\src\\components\\list-report\\utils.js",["123"],"import dayjs from 'dayjs';\r\n\r\n\r\nconst ROW_HEIGHT = 85;\r\nconst NUMBER_COLUMNS = 12;\r\n\r\nfunction convertWidth(str, totalWidth) {\r\n  const index = str.indexOf('px');\r\n  return +str.substring(0, index);\r\n}\r\n\r\nexport function getColumns({ definition }) {\r\n  const columns = definition.columns.reduce((acc, col) => {\r\n      return acc.concat([{\r\n        field: col.systemname || col.name,\r\n        headerName: col.name,\r\n        width: convertWidth(col.width),\r\n        hidden: !col.visible,\r\n        order: col.order,\r\n        style: col.style || null\r\n      }]);\r\n    }, [])\r\n    .sort((a, b) => {\r\n      if (a.order < b.order) return -1;\r\n      return 1;\r\n    });\r\n  columns[columns.length -1]['flex'] = 1;\r\n\r\n  return columns;\r\n}\r\n\r\nfunction formatCell(row, stylesMap) {\r\n  Object.keys(row).map(name => {\r\n    if (stylesMap[name]) {\r\n      if (stylesMap[name] === 'datetime') {\r\n        const val = dayjs(row[name]).format('DD/MM/YYYY HH:mm');\r\n        row[name] = val;\r\n      }\r\n    }\r\n  });\r\n\r\n  return row;\r\n}\r\n\r\nexport function formatData(data, columns) {\r\n  const stylesMap = columns.reduce((acc, col) => {\r\n    if (col.style) acc[col.field] = col.style;\r\n    return acc;\r\n  }, {});\r\n  return data.map(row => {\r\n    return formatCell(row, stylesMap);\r\n  });\r\n}\r\n\r\nexport function getFormDefinition({ definition: {columns}}) {\r\n  const rowPositions = columns.reduce((obj, widget) => {\r\n    if (!obj[widget.position[1]] || obj[widget.position[1]] < widget.size[1]) {\r\n      obj[widget.position[1]] = widget.size[1];\r\n    }\r\n    return obj;\r\n  }, {});\r\n  const maxRowNumber = Math.max(...Object.keys(rowPositions).map(k => parseInt(k)));\r\n\r\n  //общая высота сетки\r\n  const totalHeight = rowPositions[maxRowNumber] > 1\r\n    ? (maxRowNumber + rowPositions[maxRowNumber]) * ROW_HEIGHT\r\n    : (maxRowNumber + 1) * ROW_HEIGHT;\r\n\r\n  //параметры одной ячейки в процентах\r\n  const colHeight = (100 * ROW_HEIGHT)/totalHeight;\r\n  const colWidth = 100/NUMBER_COLUMNS;\r\n\r\n  const definition = columns\r\n    .filter(c => c.show_in_form)\r\n    .map(c => ({\r\n      fieldName: c.systemname,\r\n      label: c.name || c.systemname,\r\n      fieldFormat: c.style,\r\n      pattern: c.pattern || null,\r\n      readonly: c.readonly || false,\r\n      required: c.required || false,\r\n      width: `${colWidth * c.size[0]}%`,\r\n      height: `${colHeight * c.size[1]}%`,\r\n      top: c.position[1] * colHeight + '%',\r\n      left: c.position[0] * colWidth + '%'\r\n    }));\r\n  return {\r\n    totalHeight,\r\n    definition\r\n  }\r\n}","D:\\projects\\esp32\\front\\src\\components\\list-report\\list-localization.js",[],"D:\\projects\\esp32\\front\\src\\services\\auth.js",[],"D:\\projects\\esp32\\front\\src\\components\\modal\\index.js",["124","125"],"import React, { useEffect, useState } from 'react';\r\nimport Modal from '@material-ui/core/Modal';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\nimport { WidgetContainer } from '../widgets';\r\nimport { useSnackbar } from 'notistack';\r\nimport { PopupComponent } from '../popup';\r\nimport FetchData from '../../services/fetchData';\r\n\r\nimport { useStyles } from './style';\r\n\r\n\r\nconst fetchService = new FetchData();\r\n\r\nexport const ModalWrapper = ({ show, onClose, title, titleField, tableName, id, height, definition }) => {\r\n  const classes = useStyles();\r\n  const [data, setData] = useState(null);\r\n  const [status, setStatus] = useState('loading'); //loaded, error\r\n  const [popupOpen, setPopupOpen] = useState(false);\r\n  const { enqueueSnackbar, closeSnackbar } = useSnackbar();\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      setStatus('loading');\r\n      fetchService\r\n        .getOneRecord(tableName, id)\r\n        .then(res => {\r\n          setData(res);\r\n          setTimeout(() => {\r\n            // enqueueSnackbar(`Запись id: ${id} получена`, {\r\n            //   variant: 'success'\r\n            // });\r\n            setStatus('loaded');\r\n          }, 500);\r\n        })\r\n        .catch(err => {\r\n          console.log(err);\r\n          setStatus('error');\r\n        });\r\n    }\r\n    return () => {\r\n      // console.log('unmount');\r\n    }\r\n  }, [id]);\r\n\r\n  const addAlert = () => {\r\n    enqueueSnackbar('Test snackbar', {\r\n      variant: 'success'\r\n    });\r\n  }\r\n\r\n  const openPopup = () => {\r\n    setPopupOpen(true);\r\n  }\r\n\r\n  const confirmHandle = () => {\r\n    setPopupOpen(false);\r\n    console.log('agree');\r\n  }\r\n\r\n  const declineHandler = () => {\r\n    setPopupOpen(false);\r\n    console.log('cancel');\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <PopupComponent open={popupOpen} onAccept={confirmHandle} onCancel={declineHandler} />\r\n      <Modal\r\n        open={show}\r\n        onClose={onClose}\r\n        closeAfterTransition\r\n        BackdropComponent={Backdrop}\r\n        BackdropProps={{\r\n          timeout: 500,\r\n        }}\r\n      >\r\n        <Slide direction='down' in={show} mountOnEnter unmountOnExit>\r\n          <div className={classes.container}>\r\n            <AppBar position='static' className={classes.appbar}>\r\n              <div className={classes.displayName}>\r\n                <Typography className={classes.title}>\r\n                  {title}:\r\n                </Typography>\r\n                <Typography className={classes.title}>\r\n                  {status === 'loading' || status ==='error'\r\n                    ? <Skeleton variant='text' className={classes.titleMock}/>\r\n                    : data[titleField]}\r\n                </Typography>\r\n              </div>\r\n              <div className={classes.btnGroup}>\r\n                <Button variant='contained' color='secondary' onClick={openPopup}>Удалить запись</Button>\r\n                <Button\r\n                  variant='contained'\r\n                  className={classes.headerBtn}\r\n                  onClick={addAlert}\r\n                >\r\n                  Сохранить\r\n                </Button>\r\n              </div>\r\n            </AppBar>\r\n            <div className={classes.grid} style={{height: height + 'px'}}>\r\n              {definition.map((cell, idx) => {\r\n                return (\r\n                  <div\r\n                    key={idx}\r\n                    className={classes.cell}\r\n                    style={{\r\n                      height: cell.height,\r\n                      width: cell.width,\r\n                      top: cell.top,\r\n                      left: cell.left\r\n                    }}\r\n                  >\r\n                    <Typography className={classes.label}>{cell.label}</Typography>\r\n                    {status === 'loading'\r\n                      ? <Skeleton variant=\"rect\" width='100%' height='40px'/>\r\n                      : <WidgetContainer definition={cell} data={data[cell.fieldName]}/>}\r\n                  </div>\r\n                )\r\n              })}\r\n            </div>\r\n          </div>\r\n        </Slide>\r\n      </Modal>\r\n    </div>\r\n  )\r\n}","D:\\projects\\esp32\\front\\src\\components\\modal\\style.js",[],"D:\\projects\\esp32\\front\\src\\components\\widgets\\index.js",[],"D:\\projects\\esp32\\front\\src\\components\\popup\\index.js",[],"D:\\projects\\esp32\\front\\src\\components\\popup\\style.js",[],"D:\\projects\\esp32\\front\\src\\components\\list-report\\style.js",[],"D:\\projects\\esp32\\front\\src\\components\\widgets\\style.js",[],{"ruleId":"126","replacedBy":"127"},{"ruleId":"128","replacedBy":"129"},{"ruleId":"130","severity":1,"message":"131","line":1,"column":44,"nodeType":"132","messageId":"133","endLine":1,"endColumn":52},{"ruleId":"130","severity":1,"message":"134","line":32,"column":18,"nodeType":"132","messageId":"133","endLine":32,"endColumn":27},{"ruleId":"135","severity":1,"message":"136","line":38,"column":6,"nodeType":"137","endLine":38,"endColumn":8,"suggestions":"138"},{"ruleId":"135","severity":1,"message":"139","line":43,"column":5,"nodeType":"137","endLine":43,"endColumn":10,"suggestions":"140"},{"ruleId":"141","severity":1,"message":"142","line":33,"column":29,"nodeType":"143","messageId":"144","endLine":33,"endColumn":31},{"ruleId":"130","severity":1,"message":"145","line":24,"column":28,"nodeType":"132","messageId":"133","endLine":24,"endColumn":41},{"ruleId":"135","severity":1,"message":"146","line":48,"column":6,"nodeType":"137","endLine":48,"endColumn":10,"suggestions":"147"},"no-native-reassign",["148"],"no-negated-in-lhs",["149"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'setErrors' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'location.pathname'. Either include it or remove the dependency array.","ArrayExpression",["150"],"React Hook useEffect has missing dependencies: 'fetchData' and 'report'. Either include them or remove the dependency array. You can also do a functional update 'setReport(r => ...)' if you only need 'report' in the 'setReport' call.",["151"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","'closeSnackbar' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'tableName'. Either include it or remove the dependency array.",["152"],"no-global-assign","no-unsafe-negation",{"desc":"153","fix":"154"},{"desc":"155","fix":"156"},{"desc":"157","fix":"158"},"Update the dependencies array to be: [location.pathname]",{"range":"159","text":"160"},"Update the dependencies array to be: [fetchData, report, url]",{"range":"161","text":"162"},"Update the dependencies array to be: [id, tableName]",{"range":"163","text":"164"},[1068,1070],"[location.pathname]",[1132,1137],"[fetchData, report, url]",[1595,1599],"[id, tableName]"]