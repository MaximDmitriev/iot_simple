[{"D:\\projects\\esp32\\front\\src\\index.js":"1","D:\\projects\\esp32\\front\\src\\App.js":"2","D:\\projects\\esp32\\front\\src\\pages\\index.js":"3","D:\\projects\\esp32\\front\\src\\components\\navbar\\index.js":"4","D:\\projects\\esp32\\front\\src\\pages\\login.js":"5","D:\\projects\\esp32\\front\\src\\pages\\404.js":"6","D:\\projects\\esp32\\front\\src\\pages\\main.js":"7","D:\\projects\\esp32\\front\\src\\components\\navbar\\style.js":"8","D:\\projects\\esp32\\front\\src\\pages\\style\\login-style.js":"9","D:\\projects\\esp32\\front\\src\\pages\\style\\404-style.js":"10","D:\\projects\\esp32\\front\\src\\pages\\style\\main-style.js":"11","D:\\projects\\esp32\\front\\src\\components\\report-container\\index.js":"12","D:\\projects\\esp32\\front\\src\\components\\report-container\\style.js":"13","D:\\projects\\esp32\\front\\src\\services\\fetchData.js":"14","D:\\projects\\esp32\\front\\src\\components\\error\\index.js":"15","D:\\projects\\esp32\\front\\src\\components\\error\\style.js":"16","D:\\projects\\esp32\\front\\src\\components\\list-report\\index.js":"17","D:\\projects\\esp32\\front\\src\\components\\list-report\\utils.js":"18","D:\\projects\\esp32\\front\\src\\components\\list-report\\list-localization.js":"19","D:\\projects\\esp32\\front\\src\\services\\auth.js":"20","D:\\projects\\esp32\\front\\src\\components\\modal\\index.js":"21","D:\\projects\\esp32\\front\\src\\components\\modal\\style.js":"22"},{"size":241,"mtime":1610275600884,"results":"23","hashOfConfig":"24"},{"size":1777,"mtime":1610303076430,"results":"25","hashOfConfig":"24"},{"size":160,"mtime":1610046352222,"results":"26","hashOfConfig":"24"},{"size":2702,"mtime":1610301669173,"results":"27","hashOfConfig":"24"},{"size":4065,"mtime":1611511233766,"results":"28","hashOfConfig":"24"},{"size":967,"mtime":1610289067231,"results":"29","hashOfConfig":"24"},{"size":1693,"mtime":1610302671663,"results":"30","hashOfConfig":"24"},{"size":275,"mtime":1610104090316,"results":"31","hashOfConfig":"24"},{"size":594,"mtime":1610284343216,"results":"32","hashOfConfig":"24"},{"size":435,"mtime":1610104541099,"results":"33","hashOfConfig":"24"},{"size":218,"mtime":1610104650604,"results":"34","hashOfConfig":"24"},{"size":1747,"mtime":1611687422099,"results":"35","hashOfConfig":"24"},{"size":613,"mtime":1610115906163,"results":"36","hashOfConfig":"24"},{"size":511,"mtime":1611687839393,"results":"37","hashOfConfig":"24"},{"size":388,"mtime":1610115747519,"results":"38","hashOfConfig":"24"},{"size":172,"mtime":1610115747661,"results":"39","hashOfConfig":"24"},{"size":1374,"mtime":1611701444294,"results":"40","hashOfConfig":"24"},{"size":1207,"mtime":1611609583104,"results":"41","hashOfConfig":"24"},{"size":2494,"mtime":1610133810467,"results":"42","hashOfConfig":"24"},{"size":648,"mtime":1610301669157,"results":"43","hashOfConfig":"24"},{"size":2331,"mtime":1611701378256,"results":"44","hashOfConfig":"24"},{"size":957,"mtime":1611701265222,"results":"45","hashOfConfig":"24"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},"1x2h9kc",{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"48"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"48"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"48"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"68","messages":"69","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74","usedDeprecatedRules":"48"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"85","messages":"86","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"87","usedDeprecatedRules":"48"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"92","messages":"93","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\projects\\esp32\\front\\src\\index.js",[],["96","97"],"D:\\projects\\esp32\\front\\src\\App.js",["98"],"import React, { createContext, useContext, useState } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { Container } from '@material-ui/core';\nimport { MainPage, LoginPage, NotFoundPage } from './pages';\nimport { useProvideAuth } from './services/auth';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport './App.css';\n\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundImage: 'url(/img/iot4.png)',\n    backgroundRepeat: 'no-repeat',\n    backgroundPositionY: 'center',\n    height: '100vh',\n    width: '100vw',\n    margin: 0,\n    padding: 0\n  },\n}));\n\nconst authContext = createContext();\nexport function useAuth() {\n  return useContext(authContext);\n}\n\nfunction ProvideAuth({ children }) {\n  const auth = useProvideAuth();\n\n  return <authContext.Provider value={auth}>{children}</authContext.Provider>\n}\n\nfunction PrivateRoute({ children, ...rest }) {\n  const auth = useAuth();\n  return (\n    <Route\n      {...rest}\n      render={({ location }) => auth.user\n        ? children\n        : <Redirect to={{ pathname: \"/login\", state: { from: location } }} />}\n    />\n  );\n}\n\nfunction App() {\n  const classes = useStyles();\n\n  return (\n    <Container maxWidth=\"lg\">\n      <Container maxWidth=\"lg\" className={classes.root} >\n        <ProvideAuth>\n          <Switch>\n            <PrivateRoute path=\"/report\">\n              <MainPage />\n            </PrivateRoute>\n            <PrivateRoute path=\"/\" exact>\n              <MainPage />\n            </PrivateRoute>\n            <Route path=\"/login\">\n              <LoginPage />\n            </Route>\n            <Route>\n              <NotFoundPage />\n            </Route>\n          </Switch>\n        </ProvideAuth>\n      </Container>\n    </Container>\n  );\n}\n\nexport default App;\n","D:\\projects\\esp32\\front\\src\\pages\\index.js",[],"D:\\projects\\esp32\\front\\src\\components\\navbar\\index.js",[],"D:\\projects\\esp32\\front\\src\\pages\\login.js",["99"],"import React, { useState } from 'react';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  Button,\r\n  FormControl,\r\n  IconButton,\r\n  InputAdornment,\r\n  Paper,\r\n  TextField,\r\n  Typography\r\n} from '@material-ui/core';\r\nimport { AccountCircle, Lock, Visibility, VisibilityOff } from '@material-ui/icons';\r\nimport { Navbar } from '../components/navbar';\r\nimport { useAuth } from '../App';\r\n\r\nimport { useStyles } from './style/login-style';\r\n\r\n\r\nexport const LoginPage = () => {\r\n  const classes = useStyles();\r\n  const auth = useAuth();\r\n  const history = useHistory();\r\n  const location = useLocation();\r\n\r\n  const [values, setValues] = useState({\r\n    login: '',\r\n    password: '',\r\n    showPassword: false,\r\n  });\r\n\r\n  const [errors, setErrors] = useState({\r\n    login: false,\r\n    password: false,\r\n    loginText: '',\r\n    passwordText: ''\r\n  });\r\n\r\n  const [type, setType] = useState({\r\n    newUser: false\r\n  });\r\n\r\n  const changeFormType = () => {\r\n    setType({ newUser: !type.newUser });\r\n    // fetch('http://127.0.0.1:3001/json/test').then(res => {\r\n    //   console.log(res);\r\n    //   return res;\r\n    // }).\r\n    // then(res => console.log(res));\r\n  }\r\n\r\n  const login = () => {\r\n    const { from } = location.state || { from: { pathname: \"/report\" } };\r\n    auth.signin(() => {\r\n      history.replace(from);\r\n    });\r\n\r\n  }\r\n\r\n  const handleChange = (prop) => (event) => {\r\n    setValues({ ...values, [prop]: event.target.value });\r\n  };\r\n\r\n  const handleClickShowPassword = () => {\r\n    setValues({ ...values, showPassword: !values.showPassword });\r\n  };\r\n\r\n  const handleMouseDownPassword = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n      <Navbar title={'Авторизация'} />\r\n      <Paper elevation={3} className={classes.paper}>\r\n        <Typography variant={'h6'} align={'center'}>\r\n          {type.newUser ? 'Регистрация нового пользователя' : 'Вход в аккаунт'}\r\n        </Typography>\r\n        <FormControl className={classes.inputWrapper}>\r\n          <TextField\r\n            id=\"login\"\r\n            label=\"Логин\"\r\n            error={errors.login}\r\n            helperText={errors.loginText}\r\n            onChange={handleChange('login')}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <AccountCircle />\r\n                </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n        </FormControl>\r\n        <FormControl className={classes.inputWrapper}>\r\n          <TextField\r\n            id=\"password\"\r\n            label=\"Пароль\"\r\n            type={values.showPassword ? 'text' : 'password'}\r\n            error={errors.password}\r\n            helperText={errors.passwordText}\r\n            onChange={handleChange('password')}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <Lock />\r\n                </InputAdornment>\r\n              ),\r\n              endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={handleClickShowPassword}\r\n                  onMouseDown={handleMouseDownPassword}\r\n                >\r\n                  {values.showPassword ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n              )\r\n            }}\r\n          />\r\n        </FormControl>\r\n        <Box className={classes.btnWrapper}>\r\n          <Button className={classes.button} color=\"primary\" variant=\"contained\" onClick={login}>\r\n            {type.newUser ? 'Зарегистрироваться' : 'Войти'}\r\n          </Button>\r\n          <Button className={classes.button} variant=\"contained\" onClick={changeFormType}>\r\n            {type.newUser ? 'Уже есть аккаунт' : 'Создать аккаунт'}\r\n          </Button>\r\n        </Box>\r\n      </Paper>\r\n    </>\r\n  )\r\n}","D:\\projects\\esp32\\front\\src\\pages\\404.js",[],"D:\\projects\\esp32\\front\\src\\pages\\main.js",["100"],"import React, { useEffect, useState } from 'react';\r\nimport { Navbar } from '../components/navbar';\r\nimport { Paper, Typography } from '@material-ui/core';\r\nimport { ReportContainer } from '../components/report-container';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\nimport { useStyles } from './style/main-style';\r\n\r\n\r\nconst reportsList = [\r\n  { url: 'users', name: 'Пользователи' },\r\n  { url: 'sensors', name: 'Датчики' },\r\n  { url: 'dashboards', name: 'Дашборды' },\r\n];\r\n\r\n\r\n\r\nexport const MainPage = () => {\r\n  const classes = useStyles();\r\n  const location = useLocation();\r\n\r\n  const [report, setReport] = useState({\r\n    type: 'start',\r\n    name: 'Основная панель'\r\n  });\r\n\r\n  const chooseReport = (item) => {\r\n    const currentReport = reportsList.find(r => r.url === item);\r\n    if (currentReport) {\r\n      setReport({ type: currentReport.url, name: currentReport.name });\r\n    }\r\n  }\r\n  useEffect(() => {\r\n    let restUrl = location.pathname.split('/');\r\n    if (restUrl[1] === 'report' && restUrl[2]) {\r\n      chooseReport(restUrl[2]);\r\n    }\r\n  }, []);\r\n\r\n  const onSelectItem = (item) => {\r\n    chooseReport(item);\r\n  };\r\n\r\n\r\n  return (\r\n    <>\r\n      <Navbar title={report.name} showBtn userName=\"Максим Дмитриев\" reports={reportsList} onSelectItem={(item) => onSelectItem(item)}/>\r\n      {report.type === 'start'\r\n        ? (<Paper elevation={5} className={classes.paper}>\r\n            <Typography variant={'body1'} align={'center'}>\r\n              Выберите в меню нужный отчет\r\n            </Typography>\r\n          </Paper>)\r\n        : <ReportContainer url={report.type}/>}\r\n    </>\r\n  )\r\n}","D:\\projects\\esp32\\front\\src\\components\\navbar\\style.js",[],"D:\\projects\\esp32\\front\\src\\pages\\style\\login-style.js",[],"D:\\projects\\esp32\\front\\src\\pages\\style\\404-style.js",[],"D:\\projects\\esp32\\front\\src\\pages\\style\\main-style.js",[],"D:\\projects\\esp32\\front\\src\\components\\report-container\\index.js",["101"],"import React, { useEffect, useState } from 'react';\r\n\r\nimport { useStyles } from './style';\r\nimport { LinearProgress } from '@material-ui/core';\r\n\r\nimport FetchData from '../../services/fetchData';\r\nimport { ErrorComponent } from '../error';\r\nimport { ListReport } from '../list-report';\r\n\r\nconst REPORT_NOT_IMPLEMENTED_MSG = 'Отчет не готов к использованию, выберите другой отчет';\r\n\r\n\r\nexport const ReportContainer = ({ url }) => {\r\n  const fetchData = new FetchData();\r\n  const classes = useStyles();\r\n\r\n  const [report, setReport] = useState({\r\n    loaded: false,\r\n    type: null,\r\n    data: null,\r\n    metadata: null\r\n  });\r\n\r\n  useEffect(() => {\r\n    setReport({ ...report, loaded: false });\r\n\r\n    // @TODO переделать на разные запросы по url\r\n    fetchData.getReport(url).then(\r\n      res => {\r\n        if (res) {\r\n          setReport({\r\n            loaded: true,\r\n            type: res.metadata.type,\r\n            data: res.data,\r\n            metadata: res.metadata\r\n          });\r\n        } else {\r\n          console.log('error');\r\n          setReport({ ...report, loaded: 'withError' });\r\n        }\r\n      }\r\n    );\r\n  },[url]);\r\n\r\n  if (!report.loaded) {\r\n    return (\r\n      <div className={classes.progressContainer}>\r\n        <LinearProgress className={classes.progress} />\r\n      </div>\r\n    )\r\n  }\r\n\r\n  if (report.loaded === 'withError') {\r\n    return (\r\n      <div className={classes.wrapper}>\r\n        <ErrorComponent message={REPORT_NOT_IMPLEMENTED_MSG}/>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      {report.type === 'LIST' ? <ListReport data={report.data} metadata={report.metadata}/> : null}\r\n    </div>\r\n  )\r\n}","D:\\projects\\esp32\\front\\src\\components\\report-container\\style.js",[],"D:\\projects\\esp32\\front\\src\\services\\fetchData.js",[],"D:\\projects\\esp32\\front\\src\\components\\error\\index.js",[],"D:\\projects\\esp32\\front\\src\\components\\error\\style.js",[],"D:\\projects\\esp32\\front\\src\\components\\list-report\\index.js",[],"D:\\projects\\esp32\\front\\src\\components\\list-report\\utils.js",["102"],"import dayjs from 'dayjs';\r\n\r\nfunction convertWidth(str, totalWidth) {\r\n  const index = str.indexOf('px');\r\n  return +str.substring(0, index);\r\n}\r\n\r\nexport function getColumns({ definition }) {\r\n  const columns = definition.columns.reduce((acc, col) => {\r\n      return acc.concat([{\r\n        field: col.systemname || col.name,\r\n        headerName: col.name,\r\n        width: convertWidth(col.width),\r\n        hidden: !col.visible,\r\n        order: col.order,\r\n        style: col.style || null\r\n      }]);\r\n    }, [])\r\n    .sort((a, b) => {\r\n      if (a.order < b.order) return -1;\r\n      return 1;\r\n    });\r\n  columns[columns.length -1]['flex'] = 1;\r\n\r\n  return columns;\r\n}\r\n\r\nfunction formatCell(row, stylesMap) {\r\n  Object.keys(row).map(name => {\r\n    if (stylesMap[name]) {\r\n      if (stylesMap[name] === 'datetime') {\r\n        const val = dayjs(row[name]).format('DD/MM/YYYY HH:mm');\r\n        row[name] = val;\r\n      }\r\n    }\r\n  });\r\n\r\n  return row;\r\n}\r\n\r\nexport function formatData(data, columns) {\r\n  const stylesMap = columns.reduce((acc, col) => {\r\n    if (col.style) acc[col.field] = col.style;\r\n    return acc;\r\n  }, {});\r\n  return data.map(row => {\r\n    return formatCell(row, stylesMap);\r\n  });\r\n}","D:\\projects\\esp32\\front\\src\\components\\list-report\\list-localization.js",[],"D:\\projects\\esp32\\front\\src\\services\\auth.js",[],"D:\\projects\\esp32\\front\\src\\components\\modal\\index.js",["103","104","105"],"D:\\projects\\esp32\\front\\src\\components\\modal\\style.js",[],{"ruleId":"106","replacedBy":"107"},{"ruleId":"108","replacedBy":"109"},{"ruleId":"110","severity":1,"message":"111","line":1,"column":44,"nodeType":"112","messageId":"113","endLine":1,"endColumn":52},{"ruleId":"110","severity":1,"message":"114","line":32,"column":18,"nodeType":"112","messageId":"113","endLine":32,"endColumn":27},{"ruleId":"115","severity":1,"message":"116","line":38,"column":6,"nodeType":"117","endLine":38,"endColumn":8,"suggestions":"118"},{"ruleId":"115","severity":1,"message":"119","line":43,"column":5,"nodeType":"117","endLine":43,"endColumn":10,"suggestions":"120"},{"ruleId":"121","severity":1,"message":"122","line":29,"column":29,"nodeType":"123","messageId":"124","endLine":29,"endColumn":31},{"ruleId":"110","severity":1,"message":"125","line":19,"column":10,"nodeType":"112","messageId":"113","endLine":19,"endColumn":14},{"ruleId":"110","severity":1,"message":"126","line":20,"column":18,"nodeType":"112","messageId":"113","endLine":20,"endColumn":27},{"ruleId":"115","severity":1,"message":"127","line":35,"column":6,"nodeType":"117","endLine":35,"endColumn":10,"suggestions":"128"},"no-native-reassign",["129"],"no-negated-in-lhs",["130"],"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'setErrors' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'location.pathname'. Either include it or remove the dependency array.","ArrayExpression",["131"],"React Hook useEffect has missing dependencies: 'fetchData' and 'report'. Either include them or remove the dependency array. You can also do a functional update 'setReport(r => ...)' if you only need 'report' in the 'setReport' call.",["132"],"array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","'data' is assigned a value but never used.","'setStatus' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'tableName', 'title', and 'titleField'. Either include them or remove the dependency array.",["133"],"no-global-assign","no-unsafe-negation",{"desc":"134","fix":"135"},{"desc":"136","fix":"137"},{"desc":"138","fix":"139"},"Update the dependencies array to be: [location.pathname]",{"range":"140","text":"141"},"Update the dependencies array to be: [fetchData, report, url]",{"range":"142","text":"143"},"Update the dependencies array to be: [id, tableName, title, titleField]",{"range":"144","text":"145"},[1068,1070],"[location.pathname]",[1132,1137],"[fetchData, report, url]",[1066,1070],"[id, tableName, title, titleField]"]